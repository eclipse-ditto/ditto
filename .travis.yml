dist: trusty
sudo: required
language: java
jdk:
  - oraclejdk8
before_install:
  - cp .travis.settings.xml $HOME/.m2/settings.xml
install: true
script:
  - export PROJECT_VERSION=$(mvn org.apache.maven.plugins:maven-help-plugin:evaluate -Dexpression=project.version -B | grep -v '\[')
  - export MAVEN_ARGUMENTS=`if [ "$TRAVIS_EVENT_TYPE" != "pull_request" ]; then echo "-Ddocker.daemon.url=unix:///var/run/docker.sock -Pdocker-build-image"; else echo "" ; fi`
  - mvn install --batch-mode --errors -DcreateJavadoc=true $MAVEN_ARGUMENTS
