dist: trusty
sudo: required
language: java
jdk:
  - oraclejdk8
before_install:
  - cp .travis.settings.xml $HOME/.m2/settings.xml
install: true
script:
  - export PROJECT_VERSION=$(mvn org.apache.maven.plugins:maven-help-plugin:evaluate -Dexpression=project.version -B | grep -v '\[')
  - export MAVEN_ARGUMENTS=`if [ "$TRAVIS_TAG" != "" ]; then echo "-Ddocker.daemon.url=unix:///var/run/docker.sock -Ddocker.image.additional.tag=latest -Pdocker-build-image,docker-push-image"; else echo "" ; fi`
  - mvn install --batch-mode --errors -Pbuild-documentation -DcreateJavadoc=true $MAVEN_ARGUMENTS
